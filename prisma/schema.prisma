generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// [테스트용] 고양이 모델
model Cat {
  /// 고양이 식별자
  id        String    @id @default(uuid())
  /// 생성 일자
  createdAt DateTime  @default(now())
  /// 수정 일자
  updatedAt DateTime  @updatedAt
  /// 삭제 일자
  deletedAt DateTime?

  /// 고양이 이름
  name   String   @unique
  /// 고양이 나이
  age    Int
  /// 고양이 성별
  gender Boolean? @default(true)

  /// [1:N] 고양이 이미지
  image   Image  @relation(fields: [imageId], references: [id])
  /// [1:N] 이미지 식별자
  imageId String
}

/// 이미지 저장 상태
enum ImageStatus {
  /// 공용으로 사용할 기본 이미지
  DEFAULT
  /// 임시 저장 ( 게시글 업로드 시 썸네일 입력 후 생성 취소한 경우 )
  TEMP
  /// 실제로 사용되는 이미지
  USE
  /// 실제로 사용되다가 중지된 이미지 ( 업로드된 게시글을 지운 경우 썸네일 이미지 )
  DELETED
}

/// 이미지 모델
model Image {
  /// 이미지 식별자
  id        String    @id @default(uuid())
  /// 생성 일자
  createdAt DateTime  @default(now())
  /// 수정 일자
  updatedAt DateTime  @updatedAt
  /// 삭제 일자
  deletedAt DateTime?

  /// 이미지 URL
  url    String
  /// 이미지 원본 파일명
  name   String
  /// 이미지 상태
  status ImageStatus @default(TEMP)

  /// [1:N] 연결된 고양이
  cats Cat[]
}
